<%- if current_usuario.nil?  %>
  <li><a href="usuarios/sign_in">Iniciar Sesi칩n</a>
<%- else  %>
  <article>
  <%= simple_form_for @registro, 
    url: modelo_path(@registro),
    html: { } do |f| 
  %>
    <div data-role="content" class="form-inputs">
      <div id="errores">
        <% if f.object.errors.any? %>
          <div id="error_explanation">
            <div class="alert alert-error">
              <!--%= pluralize(f.object.errors.count, "error") %-->.
            </div>
            <ul>
              <% f.object.errors.messages.each do |msg| %>
                <li>* <%= msg %></li>
              <% end %>
            </ul>
          </div>
        <% end %>
        <%= f.error_notification %>
      </div>

      <div role="tabpanel">
        <ul class="nav nav-tabs" role="tablist">
          <% if can? :manage, @registro %>
            <li role="presentation" class="nav-item">
              <button id="basicos-tab" 
                      class="enviarautomatico_y_repintapf nav-link active" 
                      aria-selected="true" aria-controls="basicos" 
                      role="tab" data-bs-toggle="tab"
                      data-bs-target="#basicos" type="button">
                Datos b치sicos
              </button>
            </li>
            <li role="presentation" class="nav-item">
              <button id="recursoshumanos-tab"
                      class="enviarautomatico_y_repintapf nav-link" 
                      aria-controls="recursoshumanos" 
                      role="tab" data-bs-toggle="tab"
                      data-bs-target="#recursoshumanos" type="button">
                Recursos humanos
              </button>
            </li>
            <li role="presentation" class="nav-item">
              <button id="recursoseconomicos-tab"
                      data-bs-target="#recursoseconomicos" 
                      type="button" 
                      class="enviarautomatico_y_repintapf nav-link" 
                      aria-controls="recursoseconomicos" role="tab" 
                      data-bs-toggle="tab">
                Recursos econ칩micos y desembolsos
              </button>
            </li>
            <li role="presentation" class="nav-item">
              <button id="informes-tab"
                      data-bs-target="#informes" 
                      type="button"
                      class="enviarautomatico_y_repintapf nav-link" 
                      aria-controls="informes" role="tab" 
                      data-bs-toggle="tab">
                Informes y auditorias
              </button>
            </li>
          <% end %>
          <% if can? :edit, @registro %>
            <li role="presentation" class="nav-item">
              <button id="marcologico-tab"
                      data-bs-target="#marcologico" 
                      type="button"
                      class="enviarautomatico_y_repintapf nav-link" 
                      aria-controls="marcologico" role="tab" 
                      data-bs-toggle="tab">
                Marco L칩gico
              </button>
            </li>
          <% end %>
          <% if can? :manage, @registro%>
            <li role="presentation" class="nav-item">
              <button id="anexos-tab"
                      data-bs-target="#anexos" 
                      type="button"
                      class="enviarautomatico_y_repintapf nav-link" 
                      aria-controls="anexos" role="tab" 
                      data-bs-toggle="tab">
                Anexos
              </button>
            </li>
          <% end %>
        </ul>
        <div class="tab-content">
          <% if can? :manage, @registro%>
            <div role="tabpanel" 
                 class="tab-pane fade active show" 
                 id="basicos"
                 aria-labelledby="basicos-tab">
              <%= render 'basicos', :f => f %>
            </div> 

            <div role="tabpanel" 
                 class="tab-pane fade" 
                 aria-labelledby="recursoshumanos-tab"
                 id="recursoshumanos">
              <%= render 'recursoshumanos', :f => f %>
            </div>

            <div role="tabpanel" 
                 class="tab-pane fade" 
                 aria-labelledby="recursoseconomicos-tab"
                 id="recursoseconomicos">
              <%= render 'recursoseconomicos', :f => f %>
            </div>

            <div role="tabpanel" 
                 class="tab-pane fade" 
                 aria-labelledby="informes-tab"
                 id="informes">
              <%= render 'informes', :f => f %>
            </div>

            <div role="tabpanel" 
                 class="tab-pane fade" 
                 aria-labelledby="contabilidad-tab"
                 id="contabilidad">
              <%= render 'contabilidad', :f => f %>
            </div>

            <div role="tabpanel" 
                 class="tab-pane fade" 
                 aria-labelledby="datosfinanciador-tab"
                 id="datosfinanciador">
              <%= render 'datosfinanciador', :f => f %>
            </div>
          <% end %> 
          <% if can? :edit, @registro %>
            <div role="tabpanel" 
                 class="tab-pane fade" 
                 aria-labelledby="marcologico-tab"
                 id="marcologico">
              <%= render 'marcologico', :f => f %>
            </div>
          <% end %> 
          <% if can? :manage, @registro%>
            <div role="tabpanel" 
                 class="tab-pane fade" 
                 aria-labelledby="anexos-tab"
                 id="anexos">
              <% if f.object.id.nil? %>
                <p>Antes de agregar anexos se debe guardar el compromiso institucional</p>
              <% else %>
                <%= render 'anexos', :f => f %> 
              <% end %>
            </div>
          <% end %> 

        </div> <!-- tab-content -->
      </div> <!-- tabpanel -->
    </div> <!-- form-inputs -->

    <div class="form-actions" style="text-align: center">
      <% if controller.registrar_en_bitacora %>
        <input class='bitacora_cambio' id='proyectofinanciero_bictacora_cambio' 
               name='proyectofinanciero[bitacora_cambio]' type='hidden'>
      <% end %>
      <%= f.button :submit, 'Validar y Guardar', :class => 'btn-primary' %>
      <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
        proyectosfinancieros_path, :class => 'btn' 
      %>
    </div> <!-- form-action -->
  <% end %> <!-- simple_form_for @proyectofinanciero -->
  </article>
<% end -%> <!-- else -->

